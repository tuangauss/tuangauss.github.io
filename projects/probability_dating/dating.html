<!DOCTYPE html>
<html>
	<head>
		<title>Finding the optimal dating strategy</title>
		<meta charset = "UTF-8">
		<meta name = "viewport" content = "width = device-width, initial-scale=1">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
		<!-- change language is possible -->
		<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/r.min.js"></script>
		<!-- Change style by replacing "github" with "default" or anything else"-->
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
		<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.1.0/highlightjs-line-numbers.min.js"></script>
		<script>hljs.initLineNumbersOnLoad();</script>
        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
		<script type="text/x-mathjax-config">
			MathJax.Hub.Config({
			  TeX: { equationNumbers: { autoNumber: "AMS" } }
			}); </script>
		<script>
			// Script to open and close sidebar
			function w3_open(){
				document.getElementById("mySideBar").style.display = "block";
				document.getElementById("myOverlay").style.display = "block";
			}

			function w3_close(){
				document.getElementById("mySideBar").style.display = "none";
				document.getElementById("myOverlay").style.display = "none";		
			}
		</script>

		<style>
		.w3-sidebar a {font-family: "Roboto", sans-serif}

		body,h1,h2,h3,h4,h5,h6,.w3-wide {font-family: "Montserrat", sans-serif;}

        p, li{
        font-family: Helvetica, Arial, sans-serif;	
        font-size: 16px;
        }

		/* for block of numbers */
		td.hljs-ln-numbers {
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;

			text-align: center;
			color: #ccc;
			border-right: 1px solid #CCC;
			vertical-align: top;
			padding-right: 5px;
			/* your custom style here */
		}

		/* for block of code */
		td.hljs-ln-code {
			padding-left: 10px;
		}
		</style>
	</head>
	<body class = "w3-content" style = "max-width:1200px" data-gr-c-s-loaded = "true">
		<!-- Sidebar/menu -->
		<nav class = "w3-sidebar w3-bar-block w3-white w3-collapse w3-top" style = "z-index:3; width:250px; display: none;" id="mySideBar">
			<div class = "w3-container w3-display-container w3-padding-16">

				<i onclick = "w3_close()" class = "fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
				<h3 class = "w3-wide">
					<a href = "/index.html" style = "text-decoration:none"><b>Main</b></a>
				</h3>

			</div>

			<div class = "w3-padding-64 w3-large w3-text-grey" style="font-weight:bold">
				<a href="/statistics/statistics.html" class="w3-bar-item w3-button">Statistics</a>
				<a href="/machine_learning/machine_learning.html" class="w3-bar-item w3-button">Machine Learning</a>
				<a href="/deep_learning/dl.html" class="w3-bar-item w3-button">Deep Learning</a>
			</div>
			<a href = "/other_interest/other_interest.html" class = "w3-bar-item w3-button w3-padding">Other Interests</a>
			<a href = "/resume/resume.html" class = "w3-bar-item w3-button w3-padding">Resume</a>
			<a href = "#footer" class = "w3-bar-item w3-button w3-padding">Contact</a>
		</nav>
		<!-- Top menu on small screens -->
		<header class="w3-bar w3-top w3-hide-large w3-black w3-xlarge">
		  <div class="w3-bar-item w3-padding-24 w3-wide"><a href = "/index.html" style = "text-decoration:none">Main</a></div>
		  <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" onclick="w3_open()">
		  	<i class="fa fa-bars"></i>
		  </a>
		</header>

		<!-- Overlay effect when opening sidebar on small screens -->
		<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor: pointer; display: none;" title="close side menu" id="myOverlay"></div>

		<!-- Main contant: when side bar is visible, shift to the right by 250px -->
		<div class = "w3-main" style = "margin-left:250px">
			<div class="w3-row w3-padding-64">
    			<div class="w3-container" style = "margin-top: 10px">
      				<h1 class="w3-text-teal">Finding the optimal dating strategy for 2019 with probability theory</h1>
      				<p><b>How knowing some Statistical theory may make finding Mr. Right slightly easier?</b></p>
      				<div class = "w3-container w3-center"><img src="./img/pic1.jpeg" alt="love" style="width:60%" class = "w3-center"></div>
      				<p>Let me start with something most would agree: Dating is hard !!!</p>

      				<p><em>(If you don’t agree, that’s awesome!!! You probably don’t spend that much time reading and writing Medium posts like me T — T)</em></p>

      				<p>Nowadays, we spend countless hours every week clicking through profiles and messaging people we find attractive on Tinder or Subtle Asian Dating.</p>
      				<p>And when you finally ‘get it’, you know how to take the perfect selfies for your Tinder’s profile and you have no trouble inviting that cute girl in your Korean class to dinner, you would think that it shouldn’t be hard to find Mr/Mrs. Perfect to settle down. Nope!!! Many of us just can’t find the right match.</p>
 					
 					<p>Well, I just look, average. In actual fact, if we only look at the data of those who are 168cm in height (imagine a verticle line that goes at 168cm and passes through the red point), I sort of weight a little bit less than these people.</p>
 					<p> Another important observation is that the plot suggest a positive linear relationship between the height and weight of Vietnamese male. We will do a quantitative analysis to get to the bottom of this relationship.</p>
 					<p><em>Dating is far too complex, scary and difficult for mere mortals !!!</em></p>
 					<div class = "w3-container w3-center"><img src="./img/pic2.jpeg" alt="mobile" style="width:60%" class = "w3-center">
 					<p class = "w3-center" style = "margin-bottom: 15px; font-size: 15px"><em>Do social media and online dating apps make it easier to find The One?</em> Image Source: Dispatch Weekly</p></div>
					<p>Are our expectations too high? Are we too selfish? Or we simply destined to not meeting The One? Don’t worry! It’s not your fault. <b>You just have not done your math.</b></p>
					<h4 class="w3-text-teal">How many people should you date before you start settling for something a bit more serious?</h4>

                    <p>It’s a tricky question, so we have to turn to the mathematics and statisticians. And they have an answer: <b>37%</b>.</p>

					<p>What does that mean?</p>
                    
                    <p>It means out of all the people you could possibly date, let’s say you foresee yourself dating 100 people in the next 10 years (more like 10 for me but that’s another discussion), you should see about the first 37% or 37 people, and then settle for the <b>first person</b> after that who’s <b>better than the ones you saw before</b> (or wait for the very last one if such a person doesn’t turn up)</p>
					<p>How do they get to this number? Let’s dig up some Math.</p>
                    
                    <h3>1. The naive (or the desperate) approach:</h3>
                    <p>Let’s say we foresee \(N\) potential people who will come to our life sequentially and they are ranked according to some ‘matching/best-partner statistics’. Of course, you want to end up with the person who ranks 1st — let’s call this person \(X\).</p>
                    <p>Before we explore the optimal dating policy, let’s start with a simple approach. What if you are so desperate to get matched on Tinder or to get dates that you decide to settle/marry the first person that comes along? What is the chance of this person being \(X\)?</p>
                    <div class = "w3-container w3-center"><img src="./img/pic3.png" alt="rank" style="width:60%" class = "w3-center">
 					<p class = "w3-center" style = "margin-bottom: 15px; font-size: 15px">If you can rank these N people. How can you find \(X\)?</p></div>
 					<p>Well, it's \(\frac{1}{N}\)</p>

					<p> And as \(N\) gets larger the larger timeframe we consider, this probability will tend to <b>zero</b>. Alright, you probably will not date 10,000 people in 20 years but even the small odds of 1/100 is enough to make me feel that this is not a great dating policy.</p>
                
                	<h4 class="w3-text-teal">So what should we do?</h4>
                	<p>We do what people actually do in dating. That is, instead of committing to the first option that comes along, we want to meet a couple of potential partners, explore the quality of our dating fields and start to settle down. So there’s an exploring part and a settling-down part to this dating game.</p>
					<h4 class="w3-text-teal">But how long should we explore and wait?</h4>
					<p>To formularize the strategy: you date \(M\) out of \(N\) people, reject all of them and immediately settle with the next person who is better than all you have seen so far. Our task is to find the optimal value of \(M\). As I said earlier, the optimal rule value of M is \(M = 0.37N\). But how do we get to this number?</p>

                
                	<h3>2. A small simulation:</h3>
                	<p>I decide to run a small simulation in R to see if there’s an indication of an optimal value of M.</p>
					<p>The set up is simple and the code is as follows:</p>
 
                <pre><code class ="r"> # a util function to simulate the 'best-partner rank'
perm_rank <- function(){
  return (sample(1:100, 100))
}

#for each value of M, we simulate 1000 times
M_range <- 2:100, niter <- 1000
# declare a vector to store results, notice that if M = 1, the probability is 1/100
prob_result <- rep(1/100, 100)

# do a simulation for each value of M
for (M in M_range){
  result <- rep(0, niter)
  for (i in 1:niter){
    order <- perm_rank() #simulate the order
    highest_reject <- min(head(order, M-1)) # find the best among the first M-1 that gets rejected
    if (highest_reject != 1){
      accept <- order[order < highest_reject][1]
      # we consider ourselves successful if:
      # - rank 1 is not included in the first M-1 candidates
      # - rank 1 is the first person who is better than all we have seen
      if (accept == 1) result[i] <- 1 
      } 
  }
  prob_result[M] <- mean(result)
}</code></pre>
				<p>We can plot our simulated results for basic visualization:</p>
				<div class = "w3-container w3-center"><img src="./img/pic4.png" alt="rank" style="width:60%" class = "w3-center"></div>
 				
                <p>So it seems that with \(N = 100\), the graph does indicate a value of M that would maximize the probability that we find the best partner using our strategy. The value is \(M = 35\) with a probability of 39.4%, quite close to the magic value I said earlier, which is \(M = 37\).</p>
				<p>This simulated experiment also shows that the larger the value of \(N\) we consider, the closer we get to the magic number. Below is a graph that shows the optimal ratio \(\frac{M}{N}\) as we increase the number of candidates we consider.</p>
				<div class = "w3-container w3-center"><img src="./img/pic5.png" alt="rank" style="width:60%" class = "w3-center"></div>
				<p>There are some interesting observations here: as we increase the number of candidates \(N\) that we consider, not only does the optimal probability decreases and see to converge, so does the optimal ratio \(\frac{M}{N}\). Later on, we will prove rigorously that the two optimal entities converge to the same value of roughly 0.37.</p>
				<p>You may wonder: “Hang on a minute, won’t I achieve the highest probability of finding the best person at a very small value of \(N\)?” That’s partially right. Based on the simulation, at \(N = 3\), we can achieve the probability of success of up to 66% by simply choosing the third person every time. So does that mean we should always aim to date at most 3 people and settle on the third?</p>
				<p>Well, you could. The problem is that this strategy will only maximize the chance of finding the best among these 3 people, which, for some cases, is enough. But most of us probably want to consider a wider range of option than the first 3 viable options that enter our life. This is essentially the same reason why we are encouraged to go on multiple dates when we are young: to find out the type of people we attract and are attracted to, to gain some good understanding of dating and living with a partner, and to learn more about ourselves along the process.</p>
				<p>You may find more optimism in the fact that as we increase the range of our dating life with N, the optimal probability of finding Mr/Mrs. Perfect does not decay to zero. As long as we stick to our strategy, we can prove a threshold exists below which the optimal probability cannot fall. Our next task is to prove the optimality of our strategy and find that minimum threshold.</p>
				<h4 class="w3-text-teal">Can we prove the 37% optimal rule rigorously?</h4>

				<h3>3. The actual math:</h3>
				<p>Let \(O_{best}\) be the arrival order of the best candidate (Mr/Mrs. Perfect, The One, X, the candidate whose rank is 1, etc.) We do not know when this person will arrive in our life, but we know for sure that out of the next, pre-determined \(N\) people we will see, \(X\) will arrive at order \(O_{best} = i\).</p>
				<p>Let \(S_{n,k})\) be the event of success in choosing \(X\) among \(N\) candidates with our strategy for \(M = k\), that is, exploring and categorically rejecting the first \(k-1\) candidates, then settling with the first person whose rank is better than all you have seen so far. We can see that:</p>
				$$P(S_{n,k}|O_{best} = i) = \begin{cases} 
      0 & i\in \{1,2,3..., k-1\} \\
      \frac{k-1}{i-1} & i\in \{k, k+1, ..., n\}
   \end{cases}$$

   				<p>Why is it the case? It is obvious that if \(X\) is among the first \(k-1\) people who enter our life, then no matter who we choose afterward, we cannot possibly pick \(X\) (as we include \(X\) in those who we categorically reject). Otherwise, in the second case, we notice that our strategy can only succeed if one of the first \(k-1\) people is the best among the first \(i-1\) people.</p>
   				<p>The visual lines below will help clarify the 2 scenarios above:</p>
				<div class = "w3-container w3-center"><img src="./img/pic6.png" alt="scenrios" style="width:60%" class = "w3-center"></div>
				<p>Then, we can use the Law of Total Probability to find the marginal probability of success \(P(S_{n,k})\)</p>
				$$\begin{array} {lcl} P(S_{n,k}) & = & \sum_{i=1}^{n} P(S_{n,k}|O_{best} = i) \times P(O_{best} = i)\\ 
				&=& \sum_{i=1}^{k-1} 0 \times P(O_{best} = i) + \sum_{i=k}^{n} \frac{k-1}{i-1} \times P(O_{best} = i)\\
				&=& \sum_{i=k}^{n} \frac{k-1}{i-1} \times \frac{1}{n}\\
				&=& \frac{k-1}{n} \sum_{i=k}^{n} \frac{1}{i-1}\end{array}$$ 

				<p>In summary, we arrive at the general formula for the probability of success as follows:</p>
				$$P(S_{n,k}) = \begin{cases} 
      1 & k = 1 \\
      \frac{k-1}{n}\sum_{i=k}^{n}\frac{1}{i-1} & k\in \{2, 3, 4, ..., n\}
   \end{cases}$$

   				<p>We can plug \(n = 100\) and overlay this line on top of our simulated results to compare:</p>
   				<div class = "w3-container w3-center"><img src="./img/pic7.png" alt="cal1" style="width:80%" class = "w3-center">
 				<p class = "w3-center" style = "margin-bottom: 15px; font-size: 15px">Our theoretical results align perfectly well with the simulated experiment. The theoretical result yields a maximum probability of 37.1% at \(M = 37\)</p></div>
 				<p>I don’t want to bore you with more Maths but basically, as n gets very large, we can write our expression for \(P(S_{n,k})\) as a Riemann sum and simplify as follows:</p>
 				$$P(S_{n,k}) \longrightarrow x\int_{x}^{1} \frac{1}{t} dt = -x\text{ln}(x) $$
 				<p>where \(x= \frac{k}{n}\)</p>
 				<p>The final step is to find the value of \(x\) that maximizes this expression. Here comes some high school calculus:</p>
 				$$\frac{d}{dx}(-x\text{ln}(x)) = -\text{ln}(x) - 1$$
 				<p>This derivative has value 0 when \(\text{ln}(x) = -1\) or \(x=e^{-1} \approx 0.3678\)</p>
 				$$\frac{d}{dx}(-x\text{ln}(x)) = -\text{ln}(x) - 1$$
 				<p>Moreover, at \(x=e^{-1}\):</p>
 				$$P(S_{n,k}) = -x\text{ln}(x) = e^{-1} \approx 0.3678$$
 				<p>We just rigorously proved the 37% optimal dating strategy.</p>

 				<h3>4. The final words:</h3>
 				<p>So what’s the final punchline? Should you use this strategy to find your lifelong partner? Does it mean you should swipe left on the first 37 attractive profiles on Tinder before or put the 37 guys who slide into your DMs on ‘seen’?</p>
 				<p>Well, It’s up to you to decide.</p>
 				<p>The model provides the optimal solution <b>assuming</b> that you set strict dating rules for yourself: you have to set a specific number of candidates \(N\), you have to come up with a ranking system that guarantees no tie (The idea of ranking people does not sit well with many), and once you reject somebody, you never consider them viable dating option again.</p>
 				<p>Obviously, real-life dating is a lot messier.</p>
 				<p>Sadly, not everybody is there for you to accept or reject — \(X\), when you meet them, might actually reject you! In real-life people do sometimes go back to someone they have previously rejected, which our model doesn’t allow. It’s hard to compare people on the basis of a date, let alone coming up with a statistic that effectively predicts how great a potential spouse a person would be and rank them accordingly. And we haven’t addressed the biggest problem of them all: that it’s merely impossible to estimate the total number of viable dating options \(N\). If I imagine myself spending most of my time chunking codes and writing Medium article about dating in 20 years, how vibrant my social life will be? Will I ever get close to dating 10, 50 or 100 people?</p>

 				<p>Another interesting spin-off is to consider what the optimal strategy would be if you believe that <em>the best option will never be available to you</em>, under which circumstance you try to maximize the chance that you end up with at least the <em>second-best, third-best, etc</em>. These considerations belong to a general problem called ‘the postdoc problem’, which has a similar set-up to our dating problem and assume that the best student will go to Harvard (Yale, duh!!!) <a href = "#data_source" style = "text-decoration:none"><sup>[1]</sup></a></p>
                <hr>
                <p> The entire Python script for this article can be found at my <a href = "https://github.com/tuangauss/Various-projects/blob/master/R/dating_sim.R">Github page</a>.</p>
                <hr>
                <p id = "data_source" style = "font-size: 18px">[1] Robert J. Vanderbei (1980). <em>The Optimal Choice of a Subset of a Population</em>. Mathematics of Operations Research. 5 (4): 481–486 </p>
    			</div>
    		</div>

			<!-- Footer, contact form and details -->
			<footer class = "w3-padding-64 w3-light-gray w3-small w3-center" id="footer">
				<div class = "w3-row-padding">
					<div class = "w3-col s4">
						<h4>Contact Form</h4>
						<p>Got some ideas or cool projects?</p>
						<!-- Need to see how to work out this-->
						<form action = "/action_page.php" target="blank">
							<p>
								<input class="w3-input w3-border" type ="text" placeholder="Name" name="Name" required>
							</p>
							<p>
								<input class="w3-input w3-border" type ="text" placeholder="Email" name="Email" required>
							</p>
							<p>
								<input class="w3-input w3-border" type ="text" placeholder="Subject" name="Subject" required>
							</p>
							<p>
								<input class="w3-input w3-border" type ="text" placeholder="Message" name="Message" required>
							</p>
							<button type = "submit" class ="w3-button w3-block w3-black">Send</button>	
						</form>
					</div>

					<!-- Social media-->
					<div class = "w3-right w3-col s4 w3-justify">
						<h4>Contact</h4>
						<p>
							<i class="fa fa-fw fa-map-marker"></i> Yale University, New Haven
						</p>
						<p>
							<i class= "fa fa-fw fa-phone"></i> (203)-435-6710
						</p>
						<p>
							<i class="fa fa-fw fa-envelope"></i> tuan.nguyen.doan@aya.yale.edu
						</p>
						<a class="fa fa-facebook-official w3-hover-opacity w3-large" href = "https://www.facebook.com/tuan.doannguyen" style = "text-decoration:none"></a>
						<a class="fa fa-linkedin w3-hover-opacity w3-large" href = "https://www.linkedin.com/in/tuan-nguyen-doan/" style = "text-decoration:none"></a>
						<a class="fa fa-instagram w3-hover-opacity w3-large" href = "https://www.instagram.com/t.nguyen.1996/" style = "text-decoration:none"></a>
						<a class="fa fa-github w3-hover-opacity w3-large" href = "https://github.com/tuangauss" style = "text-decoration:none"></a>
					</div>		
				</div>
			</footer>
		</div>
	</body>
</html>
